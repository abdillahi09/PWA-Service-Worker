<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <title>Flight Scheduler</title>
</head>
<body onload="loadInfo()">
    <!-- Try using Edge browser debugger tools to test offline functionality.  Chrome works sometimes and others times do not work-->
    <div id="allin">
        <h1 id="heading">Arrivals</h1>
        <span id="span1"></span>
    </div>
    <script src="js/main.js"></script>
    <script src="sw_cached_pages.js"></script>
    <script>
        // Extracts the data from data.json file. 
        function loadInfo(){
            var xhr = new XMLHttpRequest();
            const URL = 'data.json';
            xhr.open('GET',URL,true);
            xhr.onload = function(){
                var users = JSON.parse(this.responseText);
                var output = "";
                /* This loop iterates over the flights.json file and extracts the data to the <span> tag*/
                for(var i in users){
                output+= 
                    '<div class=users>'+
                    '<span id="destination">'+users[i].from + " to " + users[i].to +'</span>'+
                        '<div id="secondline>'+
                            '<span id="time">'+users[i].time+'</span>'+ "  "+
                            '<span id="status">'+users[i].status+'</span>'+
                        '</div>'+
                    '</div>';
                }
                document.getElementById('span1').innerHTML=output;
            }
            xhr.send();
            }
    </script>
</body>
</html>

